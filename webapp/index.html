<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title id="page-title">LEO LIVE BOOK</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./css/leo-book-styles.css" />
</head>

<body>

    <!-- ================= TOP BAR ================= -->
    <nav class="navbar navbar-dark bg-dark px-3 gap-2">

        <!-- Sidebar toggle -->
        <button class="btn btn-outline-light btn-sm" data-bs-toggle="collapse" data-bs-target="#sidebar">
            <i class="bi bi-list"></i>
        </button>

        <!-- Book title -->
        <span id="headerBookTitle" class="navbar-brand ms-2 text-truncate">
            LEO LIVE BOOK
        </span>

        <!-- Search bar -->
        <form class="d-none d-md-flex flex-grow-1 mx-3" role="search">
            <div class="input-group input-group-sm">
                <span class="input-group-text bg-secondary border-0 text-light">
                    <i class="bi bi-search"></i>
                </span>
                <input id="bookSearchInput" type="search" class="form-control bg-secondary text-light border-0"
                    placeholder="Search chapters, sections, keywords…" aria-label="Search book">
            </div>
        </form>

        <!-- Mobile search icon -->
        <button class="btn btn-outline-light btn-sm d-md-none" data-bs-toggle="collapse" data-bs-target="#mobileSearch">
            <i class="bi bi-search"></i>
        </button>

        <!-- Fullscreen -->
        <button id="btnFullscreen" class="btn btn-outline-light btn-sm">
            <i class="bi bi-arrows-fullscreen"></i>
        </button>

    </nav>

    <!-- ================= MOBILE SEARCH ================= -->
    <div id="mobileSearch" class="collapse bg-dark px-3 pb-3 d-md-none">

        <div class="input-group input-group-sm">
            <span class="input-group-text bg-secondary border-0 text-light">
                <i class="bi bi-search"></i>
            </span>
            <input id="bookSearchInputMobile" type="search" class="form-control bg-secondary text-light border-0"
                placeholder="Search in book…">
        </div>

    </div>


    <!-- ================= APP LAYOUT ================= -->
    <div class="container-fluid">
        <div class="row flex-nowrap">

            <!-- ========== SIDEBAR ========== -->
            <aside id="sidebar" class="collapse show col-12 col-md-3 col-lg-2 bg-dark text-white p-3">

                <!-- Book cover -->
                <div class="text-center mb-4">
                    <img id="book-cover" src="https://m.media-amazon.com/images/I/71+XcyfnEoL._UF1000,1000_QL80_.jpg"
                        class="img-fluid rounded shadow mb-2" style="max-width:140px">
                    <div id="book-title" class="fw-semibold small">
                        LEO LIVE BOOK
                    </div>
                </div>

                <small class="text-uppercase text-secondary d-block mb-2">
                    Chapters
                </small>

                <div id="chapterList" class="chapter-list"></div>



            </aside>

            <!-- ========== READER ========== -->
            <main id="reader" class="col px-4 py-4 overflow-auto">

                <nav class="mb-3">
                    <ol id="breadcrumb" class="breadcrumb small mb-0"></ol>
                </nav>

                <div id="readerCard" class="reader-card"></div>

            </main>

            <!-- ========== AI PANEL ========== -->
            <aside id="aiPanel" class="d-none d-lg-block col-lg-3 border-start px-3 py-4 bg-white">

                <h6 class="fw-bold mb-3">
                    AI GENERATED ASSETS
                </h6>

                <div class="w-100 mb-3 rounded bg-opacity-90">
                    <div class="d-flex align-items-center gap-2">
                        <span class="spinner-grow spinner-grow-sm text-info"></span>
                        <strong>AI Agent Active</strong> Parsing · Embedding · Reasoning
                    </div>
                </div>

                <div class="btn-group w-100 mb-3">
                    <button class="btn btn-outline-primary active">Mindmap</button>
                    <button class="btn btn-outline-primary" disabled>Slides</button>
                    <button class="btn btn-outline-primary" disabled>Quiz</button>
                </div>

                <div class="position-relative border rounded mb-4">

                    <!-- Toolbar -->
                    <div class="graph-toolbar btn-group btn-group-sm position-absolute top-0 end-0 m-2 z-3">
                        <button id="zoomInBtn" class="btn btn-light" title="Zoom In">
                            <i class="bi bi-zoom-in"></i>
                        </button>
                        <button id="zoomOutBtn" class="btn btn-light" title="Zoom Out">
                            <i class="bi bi-zoom-out"></i>
                        </button>
                        <button id="fitBtn" class="btn btn-light" title="Fit">
                            <i class="bi bi-arrows-fullscreen"></i>
                        </button>
                    </div>

                    <!-- Zoom Indicator -->
                    <div id="zoomIndicator"
                        class="position-absolute bottom-0 end-0 m-2 small text-muted bg-white px-2 py-1 rounded shadow-sm">
                        100%
                    </div>

                    <!-- Graph -->
                    <div id="knowledgeGraph" style="height: 340px; background:#f8fafc;">
                    </div>

                </div>



                <div class="border rounded p-3 bg-primary bg-opacity-10">
                    <h6 class="text-primary fw-bold">
                        Learning Challenge Ready
                    </h6>
                    <p class="small mb-3">
                        5 auto-generated exercises available.
                    </p>
                    <button class="btn btn-primary btn-sm w-100" disabled>
                        Start Quiz
                    </button>
                </div>

            </aside>

        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>

    <!-- Cytoscape.js -->
    <script src="https://unpkg.com/cytoscape@3.26.0/dist/cytoscape.min.js"></script>

    <!-- Fullscreen -->
    <script>
        $("#btnFullscreen").on("click", () => {
            document.documentElement.requestFullscreen?.();
        });
    </script>

    <!-- Leo Book Engine -->
    <script src="./js/leo-book-engine.js"></script>

    <!-- Knowledge Graph Renderer -->
    <script src="./js/knowledge-graph-render.js"></script>

</body>

</html>